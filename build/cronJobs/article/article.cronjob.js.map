{"version":3,"sources":["../../../src/cronJobs/article/article.cronjob.js"],"names":["dotenv","config","process","env","CRONJOB_ARTICLE_TERM","console","log","topArticle","articleModel","find","sort","like","limit","data","JSON","stringify","fs","writeFileSync","__dirname","error"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;AACAA,gBAAOC,MAAP;;AAEA,sBAAQC,OAAO,CAACC,GAAR,CAAYC,oBAApB,EAA0C,YAAY;AACpD,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,UAAMC,UAAU,GAAG,MAAMC,iBACtBC,IADsB,GAEtBC,IAFsB,CAEjB;AACJC,MAAAA,IAAI,EAAE,CAAC;AADH,KAFiB,EAKtBC,KALsB,CAKhB,EALgB,CAAzB;AAMA,UAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeR,UAAf,CAAb;;AACAS,gBAAGC,aAAH,CAAiBC,SAAS,GAAC,iCAA3B,EAA6DL,IAA7D;;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACD,GAXD,CAWE,OAAOa,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACD;AACF,CAfD","sourcesContent":["import dotenv from 'dotenv';\nimport { cronJob } from '../cronJob';\nimport articleModel from '../../api/article/article.model';\nimport fs from 'fs';\ndotenv.config();\n\ncronJob(process.env.CRONJOB_ARTICLE_TERM, async () => {\n  try {\n    console.log('start cron');\n    const topArticle = await articleModel\n      .find()\n      .sort({\n        like: -1,\n      })\n      .limit(20);\n    const data = JSON.stringify(topArticle);\n    fs.writeFileSync(__dirname+'/../../../temp/articleData.json',data);\n    console.log('end cron');\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"file":"article.cronjob.js"}