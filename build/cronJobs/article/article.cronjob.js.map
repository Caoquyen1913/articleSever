{"version":3,"sources":["../../../src/cronJobs/article/article.cronjob.js"],"names":["dotenv","config","cronJob","process","env","CRONJOB_ARTICLE_TERM","console","log","params","page","per_page","state","top","topArticle","articlesApiService","getArticles","data","JSON","stringify","fs","writeFileSync","path","resolve","__dirname","error"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;AADA;AAGAA,gBAAOC,MAAP,G,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAC,iBAAQA,OAAR,CAAgBC,OAAO,CAACC,GAAR,CAAYC,oBAA5B,EAAkD,YAAY;AAC5D,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,UAAMC,MAAM,GAAG;AACbC,MAAAA,IAAI,EAAE,CADO;AAEbC,MAAAA,QAAQ,EAAE,EAFG;AAGbC,MAAAA,KAAK,EAAE,QAHM;AAIbC,MAAAA,GAAG,EAAE;AAJQ,KAAf;AAMA,UAAMC,UAAU,GAAG,MAAMC,qBAAmBC,WAAnB,CAA+B;AAAEP,MAAAA;AAAF,KAA/B,CAAzB;AACA,UAAMQ,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeL,UAAf,CAAb;;AACAM,gBAAGC,aAAH,CAAiBC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,gCAAxB,CAAjB,EAA4EP,IAA5E;;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACD,GAZD,CAYE,OAAOiB,KAAP,EAAc;AACdlB,IAAAA,OAAO,CAACC,GAAR,CAAYiB,KAAZ;AACD;AACF,CAhBD","sourcesContent":["import dotenv from 'dotenv';\nimport fs from 'fs';\nimport path from \"path\";\nimport cronJob from '../cronJob';\n// import articleModel from '../../api/article/article.model';\nimport articlesApiService from '../../service/articlesApi/articlesApi.service';\n\ndotenv.config();\n\n// cronJob(process.env.CRONJOB_ARTICLE_TERM, async () => {\n//   try {\n//     console.log('start cron');\n//     const topArticle = await articleModel\n//       .find()\n//       .sort({\n//         like: -1,\n//       })\n//       .limit(20);\n//     const data = JSON.stringify(topArticle);\n//     fs.writeFileSync(__dirname+'/../../../temp/articleData.json',data);\n//     console.log('end cron');\n//   } catch (error) {\n//     console.log(error);\n//   }\n// });\n\ncronJob.cronJob(process.env.CRONJOB_ARTICLE_TERM, async () => {\n  try {\n    console.log('start cron');\n    const params = {\n      page: 1,\n      per_page: 20,\n      state: \"rising\",\n      top: 20,\n    };\n    const topArticle = await articlesApiService.getArticles({ params });\n    const data = JSON.stringify(topArticle);\n    fs.writeFileSync(path.resolve(__dirname, '../../../temp/articleData.json'), data);\n    console.log('end cron');\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"file":"article.cronjob.js"}